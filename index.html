<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Breakfast Inspiration</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous" media="screen">
</head>

<body>
    <div class="container">
        <div id="button-div">
            <button data-food="scrambled%20eggs">Eggs</button>
            <button data-food="coffee">Coffee</button>
            <button data-food="waffles">Waffles</button>
        </div>
    </div>
    <form>
        <span id="user-food">Add Your Own Item:
            <input id="new-food" type="text">
            <input id="add-new-food" value="Add Item" type="submit">
        </span>
    </form>
    <div id="gifs-appear-here">
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

        $("#add-new-food").on("click", function (event) {

            event.preventDefault();

            var newFood = $("#new-food").val().trim();

            console.log(newFood);

            var newFoodButton = $("<button>");
            newFoodButton.attr("data-food", newFood);
            newFoodButton.text(newFood);
            $("#button-div").append(newFoodButton);

            console.log(newFoodButton);

            $("#new-food").val("");
        });


        $("body").on("click", "button", function () {
            var food = $(this).attr("data-food");

            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
                food + "&api_key=VbnEjdDs5zuY1dZs6KIShnVoR6Av9mj5&limit=10";

            $.ajax({
                url: queryURL,
                method: "GET"
            })
                .then(function (response) {
                    console.log(queryURL);

                    console.log(response);
                    var results = response.data;

                    for (var i = 0; i < results.length; i++) {

                        var foodDiv = $("<div>");

                        var p = $("<p>").text("Rating: " + results[i].rating);

                        var foodImage = $("<img>");
                        foodImage.attr("src", results[i].images.fixed_height_still.url);
                        foodImage.attr("data-still", results[i].images.fixed_height_still.url);
                        foodImage.attr("data-animate", results[i].images.fixed_height.url);
                        foodImage.attr("data-state", "still");
                        foodImage.addClass("gif");


                        foodDiv.append(p);
                        foodDiv.append(foodImage);

                        $("#gifs-appear-here").prepend(foodDiv);
                    }
                });
        });


        // Pause/Play script

        $("body").on("click", ".gif", function () {
            var state = $(this).attr("data-state");

            if (state === "still") {
                $(this).attr("src", $(this).attr("data-animate"));
                $(this).attr("data-state", "animate");
            } else {
                $(this).attr("src", $(this).attr("data-still"));
                $(this).attr("data-state", "still");
            }
        });






    </script>
</body>

</html>